@use "../variables" as *;
@use "../base.variables" as *;

@if $enable-base {
  /*
   * ================ Base Document Styles ================
   */

  /*
   * ================ HTML Element Foundation ================
   */

  /*
   * HTML root element
   * Sets document-wide defaults and CSS custom property inheritance
   */
  html {
    /*
     * Font foundation
     * Establishes baseline typography for the entire document
     */
    font-family: $base-font-family-primary;
    font-size: 100%; // Respect user's browser font size preference
    line-height: 1.15; // Normalize line height across browsers

    /*
     * Text rendering optimizations
     * Improves typography quality across devices
     */
    text-size-adjust: 100%; // Prevent font scaling in landscape while allowing user zoom
    text-rendering: optimizeLegibility; // Enable ligatures and kerning
    -webkit-font-smoothing: antialiased; // Improve font rendering on webkit
    -moz-osx-font-smoothing: grayscale; // Improve font rendering on Firefox/macOS

    /*
     * Layout foundation
     * Establishes document flow and box model
     */
    box-sizing: border-box;
    scroll-behavior: smooth;

    /*
     * Accessibility improvements
     * Better focus and interaction handling
     */
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0); // Remove tap highlight on mobile
    -webkit-touch-callout: none; // Disable callout on mobile
  }

  /*
   * Universal box-sizing inheritance
   * Apply border-box to all elements for consistent sizing
   */
  *,
  *::before,
  *::after {
    box-sizing: inherit;
  }

  /*
   * ================ Body Element Foundation ================
   * Main document content container
   */
  body {
    /*
     * Layout and positioning
     * Establishes main content container behavior
     */
    margin: 0;
    padding: 0;
    min-height: 100vh;

    /*
     * Typography foundation
     * Default text appearance for document content
     */
    font-family: $base-font-family-primary;
    font-size: $base-font-size-base;
    font-weight: $base-font-weight-normal;
    font-synthesis-weight: none; /* Prevents synthetic bold generation for better performance */
    line-height: $base-line-height-normal;
    color: $base-color-text;

    /*
     * Visual foundation
     * Default appearance and rendering
     */
    background-color: $base-color-background;
    text-rendering: optimizeLegibility; /* Enhanced text rendering quality */

    /*
     * Interaction improvements
     * Better touch and selection behavior
     */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    /*
     * Responsive behavior
     * Prevent horizontal scrolling and improve mobile experience
     */
    overflow-x: hidden;
    word-wrap: break-word;
  }

  /*
   * ================ Document Language Support ================
   * Directional and language-specific styling
   */

  /*
   * Right-to-left language support
   * Proper text flow for RTL languages
   */
  [dir="rtl"] {
    text-align: right;
  }

  [dir="ltr"] {
    text-align: left;
  }

  /*
   * ================ Focus Management ================
   * Accessibility and keyboard navigation
   */

  /*
   * Focus-visible support
   * Modern focus indicators that only show for keyboard navigation
   */
  :focus {
    outline: 2px solid transparent;
    outline-offset: 2px;
  }

  :focus-visible {
    outline: $base-focus-outline;
    outline-offset: 2px;
  }

  *,
  *::before,
  *::after {
    border-color: var(--border);
    outline-color: color-mix(in oklab, var(--ring) 50%, transparent);
  }

  /*
   * Focus within support
   * Maintain smooth scrolling during focus navigation
   */
  html:focus-within {
    scroll-behavior: smooth;
  }

  /*
   * ================ Selection Styling ================
   * Text selection appearance
   */
  ::selection,
  ::-moz-selection {
    background-color: var(--selection);
    color: var(--selection-foreground);
    text-shadow: none;
  }

  /*
   * ================ Reduced Motion Support ================
   * Accessibility for users who prefer reduced motion
   */
  @media (prefers-reduced-motion: reduce) {
    /*
     * Disable animations for users who prefer reduced motion
     * Accessibility compliance for vestibular disorders
     */
    html:focus-within {
      scroll-behavior: auto;
    }

    *,
    *::before,
    *::after {
      animation-duration: $base-reduced-motion-duration !important;
      animation-iteration-count: 1 !important;
      transition-duration: $base-reduced-motion-duration !important;
      scroll-behavior: auto !important;
    }
  }

  /*
   * ================ High Contrast Mode Support ================
   * Windows High Contrast Mode compatibility
   */
  @media (prefers-contrast: high) {
    /*
     * Enhanced contrast for accessibility
     * Ensures content remains readable in high contrast mode
     */
    body {
      background: Canvas;
      color: CanvasText;
    }

    a {
      color: LinkText;
    }

    button {
      background: ButtonFace;
      color: ButtonText;
      border: 1px solid ButtonText;
    }
  }

  /*
   * ================ Dark Mode Foundation ================
   * Basic dark mode support using system preferences
   */
  @media (prefers-color-scheme: dark) {
    /*
     * Automatic dark mode styling
     * Respects user's system preference when no explicit theme is set
     */
    html {
      color-scheme: dark;
    }

    /*
     * Automatic dark mode styling
     * Respects user's system preference when no explicit theme is set
     */
    body {
      background-color: var(--background);
      color: var(--foreground);
    }

    ::selection {
      background-color: var(--selection);
      color: var(--selection-foreground);
    }
  }

  /*
   * ================ Print Optimization ================
   * Document-level print styling
   */
  @media print {
    /*
     * Print-specific document optimization
     * Better paper output and ink conservation
     */
    html {
      font-size: $base-print-font-size;
    }

    body {
      background: white !important;
      color: black !important;
      line-height: 1.4;
    }
  }

  /*
   * ================ Specialized Features ================
   * Safari-specific styling with system font support
   */
  @supports (font: -apple-system-body) and (-webkit-appearance: none) {
    [data-wrapper] {
      border-top: 1px solid var(--color-border);
      min-height: 100vh; /* from min-[1800px]:border-t */
    }
  }
}
